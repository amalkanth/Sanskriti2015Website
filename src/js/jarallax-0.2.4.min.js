var Jarallax=function(){this.FPS=24,this.FPS_INTERVAL=1e3/this.FPS,this.FRAME_DATA_SAMPLE=24,this.FRAME_DATA_REFRESH=12,this.fpsTop=0,this.fpsBottom=1e3,this.animations=[],this.defaultValues=[],this.progress=0,this.properties={},this.prevProgress=0,this.controllers=[],this.maxProgress=1,this.timer=void 0,this.allowWeakProgress=!0,this.frameRate=this.FPS,this.stepSize=0,this.jumping=!1;for(var t in arguments)arguments[t]instanceof Array?this.controllers=arguments[t]:arguments[t].isController?this.controllers.push(arguments[t]):arguments[t]instanceof Object?this.properties=arguments[t]:console.log("WARNING: bad argument "+t);this.controller||this.controllers.push($.browser.iDevice?new ControllerApple(!1):$.browser.mozilla?new ControllerScroll(!1,this.properties.horizontal,this.properties.disableVertical):new ControllerScroll(!0,this.properties.horizontal,this.properties.disableVertical));for(var e in this.controllers)this.controllers[e].activate(this);this.frameChart=[];for(var r=1;600>=r;r++)this.frameChart[r]=1e3/r};Jarallax.prototype.setProgress=function(t,e){if(t>1?t=1:0>t&&(t=0),this.progress!=t&&(this.progress=t,this.allowWeakProgress||!r)){this.previousTime=new Date,this.currentTime=new Date;var r=e||!1;for(var s in this.defaultValues)this.defaultValues[s].activate(this.progress);for(var o in this.animations)this.animations[o].activate(this.progress);for(var i in this.controllers)this.controllers[i].update(this.progress);this.currentTime=new Date,this.stepSize=Math.max(this.currentTime-this.previousTime,this.stepSize)}},Jarallax.prototype.clearAnimations=function(){this.animations=[]},Jarallax.prototype.clearDefaults=function(){this.defaultValues=[]},Jarallax.prototype.clearControllers=function(){this.controllers=[]},Jarallax.prototype.jumpToProgress=function(t,e,r){return t.indexOf?-1!=t.indexOf("%")&&(t=parseFloat(t)/100):t/=this.maxProgress,t==this.progress?!1:(t>1?t=1:0>t&&(t=0),this.smoothProperties={},this.smoothProperties.timeStep=1e3/r,this.smoothProperties.steps=e/this.smoothProperties.timeStep,this.smoothProperties.currentStep=0,this.smoothProperties.startProgress=this.progress,this.smoothProperties.diffProgress=t-this.progress,this.smoothProperties.previousValue=this.progress,this.smooth(),this.allowWeakProgress=!1,!1)},Jarallax.prototype.smooth=function(t){var e;if(e=t?t:this,e.smoothProperties.currentStep++,clearTimeout(e.timer),e.smoothProperties.currentStep<e.smoothProperties.steps){var r=e.smoothProperties.currentStep/e.smoothProperties.steps,s=Jarallax.EASING.easeOut(r,e.smoothProperties.startProgress,e.smoothProperties.diffProgress,1,5);e.jumpingAllowed=!0,e.setProgress(s),e.jumpingAllowed=!1,e.timer=window.setTimeout(function(){e.smooth(e)},e.smoothProperties.timeStep),e.smoothProperties.previousValue=s,e.allowWeakProgress=!1}else e.jumpingAllowed=!0,e.setProgress(e.smoothProperties.startProgress+e.smoothProperties.diffProgress),e.jumpingAllowed=!1,e.clearSmooth(e)},Jarallax.prototype.clearSmooth=function(t){t.allowWeakProgress=!0,clearTimeout(t.timer),delete t.smoothProperties},Jarallax.prototype.setDefault=function(t,e){if(!t)throw new Error("no selector defined.");if(JarallaxTools.isValues(e)){var r=new JarallaxObject(t,e);r.activate(),this.defaultValues.push(r)}},Jarallax.prototype.addStatic=function(t,e){if(!t)throw new Error("no selector defined.");if(JarallaxTools.isValues(e)){var r=new JarallaxStatic(t,e[0],e[1]);this.defaultValues.push(r)}},Jarallax.prototype.addCounter=function(t){this.animations.push(new JarallaxCounter(this,t))},Jarallax.prototype.addController=function(t,e){this.controllers.push(t),e&&t.activate(this)},Jarallax.prototype.addAnimation=function(t,e,r,s){if(r=r?r.substring?[r]:r||[JarallaxTools.Platform.Any]:["any"],JarallaxTools.PlatformAllowed(r,s)){var o;if(!t)throw new Error("no selector defined.");var i=[];if(JarallaxTools.isValues(e))if(e.length)for(var a=0;a<e.length-1;a++){if(!e[a]||!e[a+1])throw new Error("bad animation data.");if(!e[a].progress||!e[a+1].progress)throw new Error("no animation boundry found.");-1==e[a+1].progress.indexOf("%")&&this.maxProgress<e[a+1].progress&&(this.maxProgress=e[a+1].progress),o=new JarallaxAnimation(t,e[a],e[a+1],this),this.animations.push(o),i.push(o)}else{e.progress||(e.progress="100%");var n={};for(var l in e)n[l]=$(t).css(l);n.progress="0%",o=new JarallaxAnimation(t,n,e,this),this.animations.push(o),i.push(o)}return i}return!1},Jarallax.prototype.cloneAnimation=function(t,e,r){if(!t)throw new Error("no selector defined.");for(var s=[],o=[],i=0;i<r.length+1;i++)o.push(e instanceof Array?e[i]:e);for(i=0;i<r.length;i++){var a=r[i],n=JarallaxTools.clone(a.startValues),l=JarallaxTools.clone(a.endValues),h=o[i],p=o[i+1];for(var c in n)h[c]&&(n[c]=JarallaxTools.calculateNewValue(h[c],n[c]));for(var u in l)p[u]&&(l[u]=JarallaxTools.calculateNewValue(p[u],l[u]));s.push(this.addAnimation(t,[n,l])[0])}return s},Jarallax.EASING={linear:function(t,e,r,s){return t/s*r+e},easeOut:function(t,e,r,s,o){return void 0===o&&(o=2),(-1*Math.pow((s-t)/s,o)+1)*r+e},easeIn:function(t,e,r,s,o){return void 0===o&&(o=2),Math.pow(t/s,o)*r+e},easeInOut:function(t,e,r,s,o){return void 0===o&&(o=2),r/=2,t*=2,s>t?Math.pow(t/s,o)*r+e:(t-=s,(-1*Math.pow((s-t)/s,o)+1)*r+e+r)}},Jarallax.EASING.none=Jarallax.EASING.linear,JarallaxTools={},JarallaxTools.hasNumbers=function(t){var e=new RegExp("\\d");return e.test(t)},JarallaxTools.isValues=function(t){if(!t)throw new Error("no values set.");if("object"!=typeof t)throw new Error('wrong data type values. expected: "object", got: "'+typeof t+'"');if(0===t.size)throw new Error("Got an empty values object");return!0},JarallaxTools.PlatformAllowed=function(t,e,r){e=e||!1,r=r||!1;for(var s=0;s<t.length;s++){if("any"==t[s])return!r;if(jQuery.browser[t[s]]){if(!e)return!r}else if(e)return r}return r?!e:e},JarallaxTools.calculateNewValue=function(t,e){var r,s=JarallaxTools.getUnits(e);return r=0===t.indexOf("+")?String(parseFloat(e)+parseFloat(t)+s):0===t.indexOf("-")?String(parseFloat(e)+parseFloat(t)+s):0===t.indexOf("*")?String(parseFloat(e)*parseFloat(t.substr(1))+s):0===t.indexOf("/")?String(parseFloat(e)/parseFloat(t.substr(1))+s):t,e.indexOf&&e.indexOf("%")>0?r+"%":r},JarallaxTools.getUnits=function(t){return t.replace(/\d+/g,"")},JarallaxTools.clone=function(t){var e={};for(var r in t)e[r]=t[r];return e},Position=function(t,e){this.x=t,this.y=e},Position.prototype.add=function(t){return new Position(this.x+t.x,this.y+t.y)},Position.prototype.subract=function(t){return new Position(this.x-t.x,this.y-t.y)},JarallaxTools.Platforms=["webkit","opera","msie","mozilla","android","blackBerry","webOs","windowsPhone","iDevice","iPad","iPhone","iPod","msie","mobile","nonMobile"],jQuery.browser.android=/android/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.blackBerry=/blackberry/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.webOs=/webos/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.windowsPhone=/windows phone/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.iDevice=/ipad|iphone|ipod/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.iPad=/ipad/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.iPhone=/iphone/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.iPod=/ipod/i.test(navigator.userAgent.toLowerCase()),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackBerry||jQuery.browser.webOs||jQuery.browser.windowsPhone||jQuery.browser.iDevice,jQuery.browser.nonMobile=!jQuery.browser.mobile,jQuery.platform={},jQuery.platform.windows=-1!=navigator.appVersion.indexOf("Win"),jQuery.platform.macOs=-1!=navigator.appVersion.indexOf("Mac"),jQuery.platform.unix=-1!=navigator.appVersion.indexOf("X11"),jQuery.platform.linux=-1!=navigator.appVersion.indexOf("Linux"),jQuery.platform.unknown=!(jQuery.platform.windows||jQuery.platform.macOs||jQuery.platform.unix||jQuery.platform.linux),JarallaxController=function(){this.isActive=!1,this.bindings=[],this.isController=!0},JarallaxController.prototype.activate=function(t){this.isActive=!0,this.jarallax&&this.jarallax===t||(this.jarallax=t)},JarallaxController.prototype.deactivate=function(){this.isActive=!1},JarallaxController.prototype.update=function(){},JarallaxCounter=function(t,e){if(!e)throw new Error("No properties defined.");if(!e.selector)throw new Error("No selector defined. properties.selector.");this.jarallax=t,this.selector=e.selector,this.startNumber=e.startNumber||0,this.endNumber=e.endNumber||100,this.startProgress=e.startProgress||"0%",this.endProgress=e.endProgress||"100%",this.decimals=e.decimals||0,this.stepSize=e.stepSize,0===this.decimals&&this.stepSize<1&&(tmp=this.stepSize.toString().split("."),this.decimals=tmp[1].length)},JarallaxCounter.prototype.activate=function(){{var t=this.endNumber-this.startNumber;t*this.jarallax.progress+this.startNumber}if(this.startProgress.indexOf("%")>=0?start=parseInt(this.startProgress,10)/100:JarallaxTools.hasNumbers(this.startProgress)&&(start=parseInt(this.startProgress,10)/this.jarallax.maxProgress),this.endProgress.indexOf("%")>=0?end=parseInt(this.endProgress,10)/100:JarallaxTools.hasNumbers(this.endProgress)&&(end=parseInt(this.endProgress,10)/this.jarallax.maxProgress),this.jarallax.progress<start)$(this.selector).html(this.startNumber);else if(this.jarallax.progress>end)$(this.selector).html(this.endNumber);else{var e=end-start,r=this.jarallax.progress-start,s=this.endNumber-this.startNumber,o=Jarallax.EASING.none(r,this.startNumber,s,e);this.stepSize&&(o=Math.round(o/this.stepSize)*this.stepSize),this.decimals>0&&(o=o.toFixed(this.decimals)),$(this.selector).html(o)}},JarallaxObject=function(t,e){this.selector=t,this.values=e},JarallaxObject.prototype.activate=function(){for(var t in this.values)$(this.selector).css(t,this.values[t])},JarallaxAnimation=function(t,e,r,s){this.progress=-1,this.selector=t,this.startValues=e,this.endValues=r,this.jarallax=s},JarallaxAnimation.prototype.activate=function(t){if(this.progress!=t){var e,r,s;if(s=void 0===this.startValues.style?{easing:"linear"}:this.startValues.style,this.startValues.progress.indexOf("%")>=0?e=parseInt(this.startValues.progress,10)/100:JarallaxTools.hasNumbers(this.startValues.progress)&&(e=parseInt(this.startValues.progress,10)/this.jarallax.maxProgress),this.endValues.progress.indexOf("%")>=0?r=parseInt(this.endValues.progress,10)/100:JarallaxTools.hasNumbers(this.endValues.progress)&&(r=parseInt(this.endValues.progress,10)/this.jarallax.maxProgress),this.startValues.event&&this.dispatchEvent(this.progress,t,e,r),t>=e&&r>=t)for(var o in this.startValues)if("progress"!==o&&"style"!==o&&"event"!==o)if(void 0!==this.endValues[o]&&"display"!==o&&"backgroundImage"!==o){var i=JarallaxTools.getUnits(this.startValues[o]+"");i=i.replace("-","");var a=parseFloat(this.startValues[o]),n=parseFloat(this.endValues[o]),l=r-e,h=t-e,p=n-a,c=Jarallax.EASING[s.easing](h,a,p,l,s.power);"px"==i&&(c=parseInt(c,10)),"."!==i&&(c+=i),"rotate"!==o?$(this.selector).css(o,c):$(this.selector).rotate(Math.round(c))}else"rotate"!==o?$(this.selector).css(o,this.startValues[o]):$(this.selector).rotate(Math.round(this.startValues[o]));this.progress=t}},JarallaxAnimation.prototype.dispatchEvent=function(t,e,r,s){var o=this.startValues.event,i={};i.animation=this,i.selector=this.selector,e>=r&&s>=e?(o.start&&r>t&&(i.type="start",o.start(i)),o.start&&t>s&&(i.type="rewind",o.start(i)),o.animating&&(i.type="animating",o.animating(i)),o.forward&&e>t&&(i.type="forward",o.forward(i)),o.reverse&&t>e&&(i.type="reverse",o.reverse(i))):(o.complete&&s>t&&e>s&&(i.type="complete",o.complete(i)),o.rewinded&&t>r&&r>e&&(i.type="rewind",o.rewinded(i)))},ControllerTime=function(t,e,r){this.interval=e,this.speed=t,this.playForward=!0,this.type=r||ControllerTime.TYPES.NORMAL},ControllerTime.prototype=new JarallaxController,ControllerTime.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),this.progress=0,this.timer=setInterval(this.onInterval.bind(this,{scope:this}),this.interval)},ControllerTime.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t),clearInterval(this.timer)},ControllerTime.prototype.onInterval=function(t){t.scope;if(this.isActive){if(this.playForward?this.progress+=this.speed:this.progress-=this.speed,this.progress>=1)switch(this.type){case ControllerTime.TYPES.NORMAL:this.progress=1,this.deactivate(this.jarallax);break;case ControllerTime.TYPES.LOOP:this.progress=0;break;case ControllerTime.TYPES.BOUNCE:this.progress=1-this.speed,this.playForward=!1}else this.progress<=0&&(this.progress=0+this.speed,this.playForward=!0);this.jarallax.setProgress(this.progress)}},ControllerTime.TYPES={NORMAL:0,LOOP:1,BOUNCE:2},ControllerTime.prototype.update=function(t){this.progress=t},ControllerScroll=function(t,e,r){if(this.target=$(window),this.horizontal=e,this.convertScroll=r,$(window).scrollTop(0),$(window).scrollLeft(0),e){var s=parseInt($("body").css("width"),10);this.scrollSpace=s-this.target.width()}else{var o=parseInt($("body").css("height"),10);this.scrollSpace=o-this.target.height()}this.smoothing=t||!1,this.targetProgress=0},ControllerScroll.prototype=new JarallaxController,ControllerScroll.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),this.convertScroll&&scrollConverter.activate(),this.target.bind("scroll",{scope:this},this.onScroll)},ControllerScroll.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t),this.convertScroll&&scrollConverter.deactivate(),this.target.unbind("scroll")},ControllerScroll.prototype.onScroll=function(t){var e=t.data.scope;if(e.jarallax.jumping&&(e.jarallax.jumpingAllowed||e.jarallax.clearSmooth(e.jarallax)),e.isActive){var r;if(e.horizontal){var s=t.data.x||e.target.scrollLeft();r=s/e.scrollSpace}else{var o=t.data.y||e.target.scrollTop();r=o/e.scrollSpace}e.smoothing?(e.targetProgress=Math.min(r,1),e.smooth()):e.jarallax.setProgress(r,!0)}},ControllerScroll.prototype.smooth=function(t){var e;e=t?t:this;var r=e.jarallax.progress,s=e.targetProgress-r;if(clearTimeout(e.timer),s>1e-4||-1e-4>s){var o=r+s/5;e.timer=window.setTimeout(function(){e.smooth(e)},e.jarallax.FPS_INTERVAL),e.jarallax.setProgress(o,!0)}else e.jarallax.setProgress(e.targetProgress,!0)},ControllerScroll.prototype.update=function(t){var e=t*this.scrollSpace;this.jarallax.allowWeakProgress||(controller.horizontal?$(window).scrollLeft(e):$(window).scrollTop(e))},ControllerMousewheel=function(t,e){this.sensitivity=-t,this.preventDefault=e||!1},ControllerMousewheel.prototype=new JarallaxController,ControllerMousewheel.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),$("body").bind("mousewheel",{scope:this},this.onScroll)},ControllerMousewheel.prototype.deactivate=function(t){$("body").unbind("mousewheel"),JarallaxController.prototype.deactivate(this,t)},ControllerMousewheel.prototype.onScroll=function(t,e){var r=t.data.scope;r.isActive&&(r.jarallax.setProgress(r.jarallax.progress+r.sensitivity*e),r.preventDefault&&t.preventDefault())},ControllerMousewheel.prototype.update=function(){},ControllerKeyboard=function(t,e,r){this.repetitiveInput=r,this.preventDefault=e||!1,this.keys=t||{38:-.01,40:.01},this.keysState={}},ControllerKeyboard.prototype=new JarallaxController,ControllerKeyboard.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),$(document.documentElement).keydown({scope:this},this.keyDown),$(document.documentElement).keyup({scope:this},this.keyUp);for(var e in this.keys)this.keysState[e]=!1},ControllerKeyboard.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t)},ControllerKeyboard.prototype.keyDown=function(t){var e=t.data.scope;if(e.isActive)for(var r in e.keys)r==t.keyCode&&((e.keysState[r]!==!0||e.repetitiveInput)&&e.jarallax.setProgress(e.jarallax.progress+e.keys[r]),e.keysState[r]=!0,e.preventDefault&&t.preventDefault())},ControllerKeyboard.prototype.keyUp=function(t){if(this.isActive){var e=t.data.scope;for(var r in e.keys)r==t.keyCode&&(e.keysState[r]=!1)}},ControllerKeyboard.prototype.update=function(){},ControllerApple=function(t){this.scrollPage=void 0===t?!0:t,this.target=$("body"),this.scrollPostion=new Position(0,0)},ControllerApple.prototype=new JarallaxController,ControllerApple.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),this.scrollSpace=$("body").height()-$(window).height(),this.target.bind("touchmove",{scope:this},this.onMove),this.target.bind("touchstart",{scope:this},this.onTouch)},ControllerApple.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t),this.target.unbind("touchmove"),this.target.unbind("touchstart")},ControllerApple.prototype.onTouch=function(t){var e=t.data.scope,r=t.originalEvent.touches.item(0);e.startPosition=new Position(r.clientX,r.clientY),t.preventDefault()},ControllerApple.prototype.onMove=function(t){var e=t.data.scope,r=t.originalEvent.touches.item(0),s=new Position(r.clientX,r.clientY),o=s.subract(e.startPosition);e.startPosition=s,e.scrollPostion=o.add(e.scrollPostion),e.scrollPostion.y=Math.max(Math.min(e.scrollPostion.y,0),-e.scrollSpace),e.jarallax.setProgress(-e.scrollPostion.y/e.scrollSpace,!1),$("body").scrollTop(e.scrollSpace*e.jarallax.progress),e.scrollPage||t.preventDefault()},ControllerApple.prototype.update=function(t){this.position.y=Math.round(t*this.scrollSpace)},ControllerDrag=function(t,e,r){this.object=$(t),this.start=e,this.end=r,this.container="",this.width=0,this.startX=0,this.startY=0},ControllerDrag.prototype=new JarallaxController,ControllerDrag.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),this.container="#scrollbar",this.object.draggable({containment:this.container,axis:"x"}),this.object.bind("drag",{scope:this},this.onDrag),this.container=$(this.container),this.width=$(this.container).innerWidth()-this.object.outerWidth()},ControllerDrag.prototype.onDrag=function(t){var e=t.data.scope;if(e.isActive){var r=parseInt($(this).css("left"),10),s=r/t.data.scope.width;t.data.scope.jarallax.setProgress(s)}},ControllerDrag.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t),this.object.unbind("drag"),this.object.draggable("destroy")},ControllerDrag.prototype.update=function(t){this.object.css("left",t*this.width)},ControllerMobile=function(t,e){this.disableDefault=t||!1,this.y=0,this.previousY=void 0,this.height=e},ControllerMobile.prototype=new JarallaxController,ControllerMobile.prototype.activate=function(t){JarallaxController.prototype.activate.call(this,t),this.height||(this.height=this.height=parseInt($("body").css("height"),10),this.height==$(window).height&&(this.height=parseInt($("#wrapper").css("height"),10))),$("body").bind("touchmove",{scope:this},this.onTouchMove),$("body").bind("touchend",{scope:this},this.onTouchEnd)},ControllerMobile.prototype.onTouchEnd=function(){this.previousY=void 0},ControllerMobile.prototype.onTouchMove=function(t,e){if(this.isActive){this.disableDefault&&t.preventDefault();var r=t.data.scope,s=e?t:t.originalEvent.touches.item(0);if(void 0===r.previousY)r.previousY=s.clientY;else{r.y+=s.clientY-r.previousY,r.y=r.y<r.height?r.y:r.height,r.y=r.y>0?r.y:0,r.previousY=s.clientY;{r.y/r.height}r.jarallax.setProgress(r.y/r.height)}}},ControllerMobile.prototype.deactivate=function(t){JarallaxController.prototype.deactivate.call(this,t),$("body").unbind("touchmove")},ControllerMobile.prototype.update=function(){},window.scrollConverter=function(t,e){var r=e.documentElement,s=!1,o=!1,i=!1,a=function(o,i,a){if(s){var n,l,h,p,c,u,d,m;n=0,l=10,c=(r?r.offsetWidth:0)||0,u=e.body.scrollWidth||0,d=r?r.clientWidth:0,m=Math.max(c,u)-d,i.detail?n=-240*i.detail:i.wheelDelta&&(n=5*i.wheelDelta),h=n/120*l,p=o.x-h,p>=0&&m>=p?(o.x=p,o.setByScript=!0,t.scrollTo(o.x,o.y)):0!==o.x&&o.x!==m&&(o.x=p>m?m:0,o.setByScript=!0,t.scrollTo(o.x,o.y)),"function"==typeof a&&a(o)}},n=function(r){r=r.toUpperCase();var s="page"+r+"Offset",o="scroll"+r,i="scroll"+("X"===r?"Left":"Top");return t[s]||t[o]||function(){var t=e.documentElement||e.body.parentNode;return("number"==typeof t[i]?t:e.body)[i]}()},l=function(r,s){var o=function(e){return e=e||t.event,a(r,e,s),e.preventDefault&&e.stopPropagation?(e.preventDefault(),void e.stopPropagation()):!1},i=function(){r.setByScript||(r.x=n("x"),r.y=n("y")),r.setByScript=!1};t.addEventListener?"onmousewheel"in t?(t.addEventListener("mousewheel",o,!1),t.addEventListener("scroll",i,!1)):(t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener("scroll",i,!1)):(e.attachEvent("onmousewheel",o),t.attachEvent("onscroll",i))},h=function(t){return t.preventDefault(),t.stopPropagation(),!1};return{activate:function(e){if(s=!0,!i){var r={x:0,y:0};l(r,e),i=!0}o&&(t.addEventListener?t.removeEventListener("scroll",h,!0):t.detachEvent("onscroll",h),o=!1)},deactivate:function(){s=!1},deactivateAllScrolling:function(){s=!1,o=!0,t.addEventListener?t.addEventListener("scroll",h,!0):t.attachEvent("onscroll",h)}}}(window,document),function($){for(var supportedCSS,styles=document.getElementsByTagName("head")[0].style,toCheck="transformProperty WebkitTransform OTransform msTransform MozTransform".split(" "),a=0;a<toCheck.length;a++)void 0!==styles[toCheck[a]]&&(supportedCSS=toCheck[a]);var IE=eval('"v"==""');jQuery.fn.extend({rotate:function(t){if(0!==this.length&&"undefined"!=typeof t){"number"==typeof t&&(t={angle:t});for(var e=[],r=0,s=this.length;s>r;r++){var o=this.get(r);if(o.Wilq32&&o.Wilq32.PhotoEffect)o.Wilq32.PhotoEffect._handleRotation(t);else{var i=$.extend(!0,{},t),a=new Wilq32.PhotoEffect(o,i)._rootObj;e.push($(a))}}return e}},getRotateAngle:function(){for(var t=[],e=0,r=this.length;r>e;e++){var s=this.get(e);s.Wilq32&&s.Wilq32.PhotoEffect&&(t[e]=s.Wilq32.PhotoEffect._angle)}return t},stopRotate:function(){for(var t=0,e=this.length;e>t;t++){var r=this.get(t);r.Wilq32&&r.Wilq32.PhotoEffect&&clearTimeout(r.Wilq32.PhotoEffect._timer)}}}),Wilq32=window.Wilq32||{},Wilq32.PhotoEffect=function(){return supportedCSS?function(t,e){t.Wilq32={PhotoEffect:this},this._img=this._rootObj=this._eventObj=t,this._handleRotation(e)}:function(t,e){if(this._img=t,this._rootObj=document.createElement("span"),this._rootObj.style.display="inline-block",this._rootObj.Wilq32={PhotoEffect:this},t.parentNode.insertBefore(this._rootObj,t),t.complete)this._Loader(e);else{var r=this;jQuery(this._img).bind("load",function(){r._Loader(e)})}}}(),Wilq32.PhotoEffect.prototype={_setupParameters:function(t){this._parameters=this._parameters||{},"number"!=typeof this._angle&&(this._angle=0),"number"==typeof t.angle&&(this._angle=t.angle),this._parameters.animateTo="number"==typeof t.animateTo?t.animateTo:this._angle,this._parameters.step=t.step||this._parameters.step||null,this._parameters.easing=t.easing||this._parameters.easing||function(t,e,r,s,o){return-s*((e=e/o-1)*e*e*e-1)+r},this._parameters.duration=t.duration||this._parameters.duration||1e3,this._parameters.callback=t.callback||this._parameters.callback||function(){},t.bind&&t.bind!=this._parameters.bind&&this._BindEvents(t.bind)},_handleRotation:function(t){this._setupParameters(t),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()},_BindEvents:function(t){if(t&&this._eventObj){if(this._parameters.bind){var e=this._parameters.bind;for(var r in e)e.hasOwnProperty(r)&&jQuery(this._eventObj).unbind(r,e[r])}this._parameters.bind=t;for(var r in t)t.hasOwnProperty(r)&&jQuery(this._eventObj).bind(r,t[r])}},_Loader:function(){return IE?function(t){var e=this._img.width,r=this._img.height;this._img.parentNode.removeChild(this._img),this._vimage=this.createVMLNode("image"),this._vimage.src=this._img.src,this._vimage.style.height=r+"px",this._vimage.style.width=e+"px",this._vimage.style.position="absolute",this._vimage.style.top="0px",this._vimage.style.left="0px",this._container=this.createVMLNode("group"),this._container.style.width=e,this._container.style.height=r,this._container.style.position="absolute",this._container.setAttribute("coordsize",e-1+","+(r-1)),this._container.appendChild(this._vimage),this._rootObj.appendChild(this._container),this._rootObj.style.position="relative",this._rootObj.style.width=e+"px",this._rootObj.style.height=r+"px",this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._eventObj=this._rootObj,this._handleRotation(t)}:function(t){this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._width=this._img.width,this._height=this._img.height,this._widthHalf=this._width/2,this._heightHalf=this._height/2;var e=Math.sqrt(this._height*this._height+this._width*this._width);this._widthAdd=e-this._width,this._heightAdd=e-this._height,this._widthAddHalf=this._widthAdd/2,this._heightAddHalf=this._heightAdd/2,this._img.parentNode.removeChild(this._img),this._aspectW=(parseInt(this._img.style.width,10)||this._width)/this._img.width,this._aspectH=(parseInt(this._img.style.height,10)||this._height)/this._img.height,this._canvas=document.createElement("canvas"),this._canvas.setAttribute("width",this._width),this._canvas.style.position="relative",this._canvas.style.left=-this._widthAddHalf+"px",this._canvas.style.top=-this._heightAddHalf+"px",this._canvas.Wilq32=this._rootObj.Wilq32,this._rootObj.appendChild(this._canvas),this._rootObj.style.width=this._width+"px",this._rootObj.style.height=this._height+"px",this._eventObj=this._canvas,this._cnv=this._canvas.getContext("2d"),this._handleRotation(t)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer),this._animateStartTime=+new Date,this._animateStartAngle=this._angle,this._animate()},_animate:function(){var t=+new Date,e=t-this._animateStartTime>this._parameters.duration;if(e&&!this._parameters.animatedGif)clearTimeout(this._timer);else{if(this._canvas||this._vimage||this._img){var r=this._parameters.easing(0,t-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration);this._rotate(~~(10*r)/10)}this._parameters.step&&this._parameters.step(this._angle);var s=this;this._timer=setTimeout(function(){s._animate.call(s)},10)}this._parameters.callback&&e&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){var t=Math.PI/180;return IE?function(t){this._angle=t,this._container.style.rotation=t%360+"deg"}:supportedCSS?function(t){this._angle=t,this._img.style[supportedCSS]="rotate("+t%360+"deg)"}:function(e){this._angle=e,e=e%360*t,this._canvas.width=this._width+this._widthAdd,this._canvas.height=this._height+this._heightAdd,this._cnv.translate(this._widthAddHalf,this._heightAddHalf),this._cnv.translate(this._widthHalf,this._heightHalf),this._cnv.rotate(e),this._cnv.translate(-this._widthHalf,-this._heightHalf),this._cnv.scale(this._aspectW,this._aspectH),this._cnv.drawImage(this._img,0,0)}}()},IE&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<rvml:"+t+' class="rvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}())}(jQuery);